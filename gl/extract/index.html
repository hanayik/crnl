<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#2D2D2D" />
  
  <title>Chris Rordens Neuropsychology Lab :: MRIcroGL Object Extraction</title>
  

  <link rel="icon" type="image/png" sizes="32x32" href="../../_static/img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="../../_static/img/favicon-16x16.png">
        <link rel="index" title="Index"
              href="../../genindex.html"/>

  <link rel="stylesheet" href="../../_static/css/insegel.css"/>

  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'',
        VERSION:'0.1',
        LANGUAGE:'None',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
    };
  </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>

  <script src="https://email.tl.fortawesome.com/c/eJxNjUEOgyAQAF8jR7Kw6wIHDh7sP1Cw2mgxgmn6-3JsMqc5zEQfE8dkxOY1KKMUOI3ACFKRJpSW2AAp7ontYIaxI6i7XPJVwyeVfCQ550Os3jLrGSNOLgbdAy6s0PBk2TFNjEbsfq31LB0OnX407pJa5v2faRadwSW63mn5KuLyR9j2tgx3zecanl-55R_-jjPs"></script>

</head>

<body>
  <div id="insegel-container">
    <header>
      <div id="logo-container">
          
          <a href="../../index.html"><img src="../../_static/img/logo.svg"></a>
          

      </div>
      <div id="project-container">
        <h1>Chris Rordens Neuropsychology Lab Documentation</h1>
      </div>
    </header>

    <div id="content-container">

      <div id="main-content-container">
        <div id="main-content-header">
          <h1>MRIcroGL Object Extraction</h1>
        </div>
        <div id="main-content">
          
  <div class="section" id="mricrogl-object-extraction">
<h1>MRIcroGL Object Extraction<a class="headerlink" href="#mricrogl-object-extraction" title="Permalink to this headline">¶</a></h1>
<a class="reference internal image-reference" href="../../_images/kidney320.png"><img alt="../../_images/kidney320.png" class="align-center" src="../../_images/kidney320.png" style="width: 320px;" /></a>
<p>Medical images are often noisy. In terms of volume rendering, noise in the air around an object can make the image appear a bit hazy. MRIcroGL’s “Extract Objects” command attempts to make all the air around an object transparent, providing a clear view of the object surface. To try this feature, simply load an image and choose “Extract Objects” from the “View” menu. You will be asked to specify a few options, but the default settings are usually pretty good. After a few seconds you will be shown the extracted object. Usually it is that simple. However, the images on this page show how adjusting the options for this command can tune the extraction process.</p>
<div class="section" id="otsu-levels">
<h2>Otsu Levels<a class="headerlink" href="#otsu-levels" title="Permalink to this headline">¶</a></h2>
<p>You are asked to specify a level of Otsu thresholding from 1..5, with the default value being 5. Large values lead to larger extracted objects. In the image below you can see what happens to an original image with the default Otsu level (5) versus an Otsu level of 1. I suggest starting with the default level, and if you are unhappy try re-opening your original image and running the extraction again with a smaller value. For those interested, this selection changes the number of levels specified by the Otsu threshold and the number of resulting levels treated as air: 1= 3/4, 2=2/3, 3= 1/2, 4=1/3, 5=1/4. In other words,selecting a level of 2 computes a threshold with 3levels of gray (e.g. each voxel will be classified as being one of three shades of gray: white, medium-gray, black) and assumes the darkest two compartments are air that should be transparent (e.g. the black and medium gray will both be set to transparent). With most medical images a default value of 5 is about right, for example with a T1-weighted MRI you can think of air, bone and water as black, gray matter as dark gray, white matter as light gray and the fat of the scalp as white: in this case we only want to remove the darkest tissue type. It should be noted that only external voxels are eliminated.</p>
<a class="reference internal image-reference" href="../../_images/extractmri.jpg"><img alt="../../_images/extractmri.jpg" class="align-center" src="../../_images/extractmri.jpg" style="width: 680px;" /></a>
</div>
<div class="section" id="edge-dilation">
<h2>Edge Dilation<a class="headerlink" href="#edge-dilation" title="Permalink to this headline">¶</a></h2>
<p>You can specify a number of voxels for dilation after the Otsu threshold. The default setting is 2, but you can choose a range of 0..12. One problem with the straight Otsu threshold is that it leaves sharp edges that can appear jagged. The problem is that many of the voxels on the surface of the object suffer from partial volume effects: in other words these voxels include a bit of the scalp and some air, but appear as dark as much of the noise seen in the air. Therefore, once we determine the edge of an object, it is often useful to grow the edge by a voxel or two to include some of these superficial voxels. Selecting a value of 0 often leads to a jagged looking volume rendering, while the “Dilate = 6” image above shows the consequence of choosing 6 voxels worth of dilation – note that there is a halo of noise around the object, as noisy air voxels are not attenuated near the scalp surface.</p>
</div>
<div class="section" id="single-or-multiple-objects">
<h2>Single or multiple objects?<a class="headerlink" href="#single-or-multiple-objects" title="Permalink to this headline">¶</a></h2>
<p>You are also allowed to select if there is only a single object in your image or if there are multiple objects. Many brain scans only include a single object (the head), and therefore only the largest single object is extracted by default. However, if your image is of multiple items you can choose to select each of these. The image below shows a Magnetic Resonance Angiography scan of the arterial blood supply to the head. Note that the original image is noisy. If one conducts the default object extraction, only the largest single object survives. The resulting extraction leaves the largest contiguous object: in this case the anterior, middle and posterior cerebral arteries. However, if one selects to extract multiple objects than several of the other arteries are preserved.</p>
<a class="reference internal image-reference" href="../../_images/extractmra.jpg"><img alt="../../_images/extractmra.jpg" class="align-center" src="../../_images/extractmra.jpg" style="width: 641px;" /></a>
</div>
<div class="section" id="brain-extraction">
<h2>Brain extraction<a class="headerlink" href="#brain-extraction" title="Permalink to this headline">¶</a></h2>
<p>Brain extraction is a special type of object extraction that attempts to remove signal from the scalp, providing an accurate representation of the gray matter and white matter. The image below shows a raw T1 scan (left image) and the extracted brain as detected using BET (middle image) and SPM8’s new segmentation (right image). There are several popular routines (see Shattuck et al. for a review) available. MRIcroGL for OSX and Linux has a command ‘Extract brain’ in the ‘view’ menu that calls FSL’s <a class="reference external" href="http://www.fmrib.ox.ac.uk/fsl/bet2/index.html">BET</a> (Brain Extraction Tool)&lt;/a&gt;. This function requires that you have <a class="reference external" href="http://www.fmrib.ox.ac.uk/fsl/fsl/downloading.html">FSL</a> installed. You simply specify an extraction fraction (a value between zero and one, with smaller values leading to larger brain volume). BET usually works pretty well. However, it has problems if the image exhibits intensity inhomogeneity (an issue that can be fixed with <a class="reference external" href="http://www.ncbi.nlm.nih.gov/pubmed/20378467">bias correction</a> ) or if the image includes too much neck (you can correct this by manually cropping the image with MRIcron). Another great alternative is using SPM8’s unified segmentation normalization to detect gray and white matter. This requires having Matlab, SPM8 and my <a class="reference external" href="http://www.mccauslandcenter.sc.edu/CRNL/tools/spm8-scripts">nii_render</a> script. Unified segmentation has prior estimates for the location of gray and white matter, and includes a sophisticated bias correction. Further, my scripts feather the edges of the brain, making the edges appear less jagged (providing better estimates for <a class="reference external" href="http://www.mccauslandcenter.sc.edu/mricrogl/shaders">surface orientation</a> ). This option typically works very well. The most common reason for problems is that SPM has a poor starting estimate – you can correct this by using SPM’s “Display” function to <a class="reference external" href="http://spect.yale.edu/analysis_details.html">adjust the origin to point to the anterior commissure</a> .</p>
<a class="reference internal image-reference" href="../../_images/bet.jpg"><img alt="../../_images/bet.jpg" class="align-center" src="../../_images/bet.jpg" style="width: 768px;" /></a>
</div>
<div class="section" id="links">
<h2>Links<a class="headerlink" href="#links" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><p>Our object extraction method is similar to <a class="reference external" href="http://www.ncbi.nlm.nih.gov/pubmed/15966000">Dogdas et al.</a> (2008) Hum Brain Mapp. 26: 273-85&lt;/a&gt;(see their Figure 3).</p></li>
<li><p><a class="reference external" href="http://www.ncbi.nlm.nih.gov/pubmed/19073267">Shattuck et al., 2009</a> compare the performance of several different brain extraction techniques.</p></li>
</ul>
</div></blockquote>
</div>
</div>


        </div>
      </div>

      <div id="side-menu-container">

        <div id="search" role="search">
        <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
            <input type="text" name="q" placeholder="Search..." />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
        </form>
</div>

        <div id="side-menu" role="navigation">

          
  
    
  
  
    <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../asl/index.html">Arterial Spin Labeling (ASL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../blindside/index.html">Blindside</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bmp_contrast/index.html">Bitmap Contrast</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../CenterOfCancellation/index.html">Center of Cancellation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../directions/index.html">Directions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../diyFmri/index.html">DIY fMRI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dti/index.html">DTI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../elecro/index.html">ELEcro</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../EMGRecorder/index.html">EMG Recorder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fieldmaps/index.html">Fieldmaps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fmriSimulator/index.html">fMRI Simulator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../jpeg-formats/index.html">JPEG Format Variations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mriconcepts/index.html">MRI Contrast</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mricro/index.html">MRIcro for macOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html">MRIcroGL Troubleshooting</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">MRIcroGL Object Extraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gradients/index.html">MRIcroGL Gradients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../shaders/index.html">MRIcroGL Shaders</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../open-source-eegecgemg/index.html">DIY Electrophysiology</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../optimizingspmfsl/index.html">Optimizing FSL and SPM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../oscilloscope/index.html">Oscilloscope using Teensy or Arduino</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../part/index.html">Physiological Artifact Removal</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../psyc450/index.html">Sensation and Perception (PSYC450)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../psyc589888/index.html">Image to Inference (PSYC589/888)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pwi/index.html">Perfusion-weighted imaging (PWI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../qa/index.html">Quality Assurance (QA)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../spatial/index.html">Spatial Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../spm8-scripts/index.html">spmScripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../stc/index.html">Slice Time Correction (STC)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../stimsync/index.html">StimSync</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../stimsync-api/index.html">StimSync API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../temporal/index.html">Temporal Filtering</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../publications/index.html">Publications</a></li>
</ul>

  


        </div>

        

      </div>

    </div>

<footer>
    <div id="footer-info">
        <ul id="build-details">
            
                <li class="footer-element">
                    
                        <a href="../../_sources/gl/extract/index.rst.txt" rel="nofollow"> source</a>
                    
                </li>
            

            

            
        </ul>
        <div id="credit">
            created with <a href="http://sphinx-doc.org/">Sphinx</a> and <a href="https://github.com/Autophagy/insegel">Insegel</a>

        </div>
    </div>

    <a id="menu-toggle" class="fa fa-bars" aria-hidden="true"></a>

    <script type="text/javascript">
      $("#menu-toggle").click(function() {
        $("#menu-toggle").toggleClass("toggled");
        $("#side-menu-container").slideToggle(300);
      });
    </script>

</footer> 

</div>

</body>
</html>
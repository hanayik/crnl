<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#2D2D2D" />
  
  <title>Chris Rordens Neuropsychology Lab :: Bitmap Contrast</title>
  

  <link rel="icon" type="image/png" sizes="32x32" href="../_static/img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="../_static/img/favicon-16x16.png">
        <link rel="index" title="Index"
              href="../genindex.html"/>

  <link rel="stylesheet" href="../_static/css/insegel.css"/>

  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'',
        VERSION:'0.1',
        LANGUAGE:'None',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
    };
  </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>

  <script src="https://email.tl.fortawesome.com/c/eJxNjUEOgyAQAF8jR7Kw6wIHDh7sP1Cw2mgxgmn6-3JsMqc5zEQfE8dkxOY1KKMUOI3ACFKRJpSW2AAp7ontYIaxI6i7XPJVwyeVfCQ550Os3jLrGSNOLgbdAy6s0PBk2TFNjEbsfq31LB0OnX407pJa5v2faRadwSW63mn5KuLyR9j2tgx3zecanl-55R_-jjPs"></script>

</head>

<body>
  <div id="insegel-container">
    <header>
      <div id="logo-container">
          
          <a href="../index.html"><img src="../_static/img/logo.svg"></a>
          

      </div>
      <div id="project-container">
        <h1>Chris Rordens Neuropsychology Lab Documentation</h1>
      </div>
    </header>

    <div id="content-container">

      <div id="main-content-container">
        <div id="main-content-header">
          <h1>Bitmap Contrast</h1>
        </div>
        <div id="main-content">
          
  <div class="section" id="bitmap-contrast">
<h1>Bitmap Contrast<a class="headerlink" href="#bitmap-contrast" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><ul class="simple">
<li><p>This page describes how Matlab can be used to tune the appearance of photographs. This page is really for scientists – most image editing applications include great tools for adjusting these values (free options include IrfanView with its great ‘Batch Conversion’, and for OSX Apple includes Preview with a nice Adjust Color feature; there are many professional options including the <a class="reference external" href="http://www.pxm-tuts.com/tutorials/tools/pixelmator-curves/">curves tool for Pixelmator</a>).</p></li>
</ul>
</div></blockquote>
<p>This image shows the results of this script: the leftmost image shows the original source image, with the subsequent images showing the effect of 0.85 linear contrast, 0.85 nonlinear contrast, and 0.15 linear contrast.</p>
<a class="reference internal image-reference" href="../_images/contrast.jpg"><img alt="../_images/contrast.jpg" class="align-center" src="../_images/contrast.jpg" style="width: 70%;" /></a>
<div class="section" id="requirements-and-usage">
<h2>Requirements and Usage<a class="headerlink" href="#requirements-and-usage" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><p>You can download the Matlab code named <a class="reference external" href="https://github.com/neurolabusc/spmScripts">bmp_contrast.m from my GitHub repository</a>, you will also need a copy of Matlab and images in formats that Matlab can read (png, jpeg, tiff, etc). This code does <strong>NOT</strong>  require a license for the Matlab Image Processing Toolbox. Launch Matlab and make sure the bmp_contrast.m file is in your current directory. You can then simply type bmp_contrast from the Matlab command line – a dialog will allow you to choose the images you will want to manipulate and then a dialog window will ask you to provide three values:</p></li>
<li><p>Desired contrast from 0..1. A value near 0.5 means no change, smaller values lead to reduced contrast and larger values lead to increased contrast. The default is 0.8 leading to an image with substantially more contrast</p></li>
<li><p>Desired brightness from 0..1. A value near 0.5 will have mid-gray brightness, lower values will lead to dark output, while higher values lead to brighter output. You can also specify a negative value (e.g. -1): in this case the brightness is adjusted based on the input image so that the output will have similar brightness. The default is -1 (automatic brightness control).</p></li>
<li><p>Linear (1) or non-linear (0) transforms. Increasing contrast with linear transforms tends to clip the image intensity (as shown in the picture where the Linear transform with a 0.85 contrast leads to a ‘blown out’ image), where the nonlinear transform has a more gradual influence near the brightest and darkest extremes. In other words, we can preserve a lot of the edges by applying a non-linear transform. On the other hand, when we reduce contrast (contrast values less than 0.5) it is generally a good idea to use a linear transform (most JPEG images store dark portions with low precision, so we do not want to exaggerate the dark colors.</p></li>
</ul>
</div></blockquote>
<p>The software also includes a file named bmp_contrast_batch which allows you to apply hundreds of contrast/brightness levels to hundreds of input images with just a few clicks – and the output images are given sensible file names.</p>
</div>
<div class="section" id="technical-notes">
<h2>Technical Notes<a class="headerlink" href="#technical-notes" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><p>Here is what this software does.</p></li>
<li><p>The image is loaded.</p></li>
<li><p>Image values are scaled to range from 0..1 (using 64-bit double precision values) regardless of whether the original image was stored with 8-bit (0..256) or 16-bit (0..65535) precision.</p></li>
<li><p>If it is a color image, the original red, green, blue color components are converted to YUV. This allows us to transform the intensity (Y) while preserving the relative color. This step is skipped for grayscale images (as these natively only store intensity).</p></li>
<li><p>If you requested brightness autobalance, the <a class="reference external" href="http://www.cs.utah.edu/%7Ereinhard/cdrom/tonemap.pdf">log-average luminance</a> is computed as an estimate for the global image brightness. The software than tests 256 different bias values with your selected gain value to identify the bias value that best maintains the orginal luminance.</p></li>
<li><p>An intensity transform is generated based on your contrast and brightness preferences. This is then applied to the intensity values of your image.</p></li>
<li><p>For color images, the YUV data is converted back to red, green and blue channels.</p></li>
<li><p>If requested, histograms of the images before and after transform as well as a graph of the transform function are displayed.</p></li>
<li><p>The newly transformed image is saved to disk.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="links">
<h2>Links<a class="headerlink" href="#links" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="http://people.sc.fsu.edu/%7Ejburkardt/m_src/image_contrast/image_contrast.html">John Burkardt</a> provides Matlab code for adaptively adjusting local edge contrast. In other words, Burkardt scripts are blurring and sharpening the images – I would personally use a Gaussian blur and Unsharp Mask for those effects. Note this is very different from my code that adjusts the global contrast.</p></li>
<li><p>The Matlab Image Processing Toolbox (which requires a separate license from Matlab) can be used to tune <a class="reference external" href="http://www.mathworks.com/products/image/examples.html?file=/products/demos/shipping/images/ipexcontrast.html">image contrat</a>.</p></li>
<li><p>My code implements <a class="reference external" href="http://dept-info.labri.fr/%7Eschlick/DOC/gem2.html">Christophe Schlick’s bias and gain algorithm</a> for the nonlinear transforms.</p></li>
<li><p>The book <a class="reference external" href="http://www.amazon.com/Advanced-High-Dynamic-Range-Imaging/dp/1568817193">Advanced High Dynamic Range Imaging: Theory and Practice</a> is a great reference for image processing. The authors also have a <a class="reference external" href="http://www.banterle.com/hdrbook/index.php">website with Matlab code from the book</a>.</p></li>
<li><p><a class="reference external" href="http://www.efg2.com/Lab/Graphics/Colors/YUV.htm">Earl F. Glynn</a> has a great page on RGB to YUV conversion with examples from TV data. The examples show how brightness data is often stored with much higher spatial precision than the color data, as the human eye is much more sensitive to brightness than hue. This same trick is typically used to aid JPEG compression.</p></li>
</ul>
</div></blockquote>
</div>
</div>


        </div>
      </div>

      <div id="side-menu-container">

        <div id="search" role="search">
        <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
            <input type="text" name="q" placeholder="Search..." />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
        </form>
</div>

        <div id="side-menu" role="navigation">

          
  
    
  
  
    <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../asl/index.html">Arterial Spin Labeling (ASL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../blindside/index.html">Blindside</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Bitmap Contrast</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CenterOfCancellation/index.html">Center of Cancellation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../directions/index.html">Directions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../diyFmri/index.html">DIY fMRI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dti/index.html">DTI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../elecro/index.html">ELEcro</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EMGRecorder/index.html">EMG Recorder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fieldmaps/index.html">Fieldmaps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fmriSimulator/index.html">fMRI Simulator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jpeg-formats/index.html">JPEG Format Variations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mriconcepts/index.html">MRI Contrast</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mricro/index.html">MRIcro for macOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gl/index.html">MRIcroGL Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gl/extract/index.html">MRIcroGL Object Extraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gl/gradients/index.html">MRIcroGL Gradients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gl/shaders/index.html">MRIcroGL Shaders</a></li>
<li class="toctree-l1"><a class="reference internal" href="../open-source-eegecgemg/index.html">DIY Electrophysiology</a></li>
<li class="toctree-l1"><a class="reference internal" href="../optimizingspmfsl/index.html">Optimizing FSL and SPM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../oscilloscope/index.html">Oscilloscope using Teensy or Arduino</a></li>
<li class="toctree-l1"><a class="reference internal" href="../part/index.html">Physiological Artifact Removal</a></li>
<li class="toctree-l1"><a class="reference internal" href="../psyc450/index.html">Sensation and Perception (PSYC450)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../psyc589888/index.html">Image to Inference (PSYC589/888)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pwi/index.html">Perfusion-weighted imaging (PWI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../qa/index.html">Quality Assurance (QA)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../spatial/index.html">Spatial Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../spm8-scripts/index.html">spmScripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stc/index.html">Slice Time Correction (STC)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stimsync/index.html">StimSync</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stimsync-api/index.html">StimSync API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../temporal/index.html">Temporal Filtering</a></li>
<li class="toctree-l1"><a class="reference internal" href="../publications/index.html">Publications</a></li>
</ul>

  


        </div>

        

      </div>

    </div>

<footer>
    <div id="footer-info">
        <ul id="build-details">
            
                <li class="footer-element">
                    
                        <a href="../_sources/bmp_contrast/index.rst.txt" rel="nofollow"> source</a>
                    
                </li>
            

            

            
        </ul>
        <div id="credit">
            created with <a href="http://sphinx-doc.org/">Sphinx</a> and <a href="https://github.com/Autophagy/insegel">Insegel</a>

        </div>
    </div>

    <a id="menu-toggle" class="fa fa-bars" aria-hidden="true"></a>

    <script type="text/javascript">
      $("#menu-toggle").click(function() {
        $("#menu-toggle").toggleClass("toggled");
        $("#side-menu-container").slideToggle(300);
      });
    </script>

</footer> 

</div>

</body>
</html>